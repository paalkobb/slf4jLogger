<?xml version="1.0" encoding="UTF-8"?>
<Configuration status="WARN">
    <Appenders>
        <!-- Console Appender -->

            <Console name="Console" target="SYSTEM_OUT">
                <PatternLayout>
                    <Pattern>%d [%t] %p %c  %highlight{%level}{FATAL=bg_red, ERROR=red, WARN=yellow, INFO=green, DEBUG=blue} - %msg%n </Pattern>
                </PatternLayout>
            </Console>


        <!-- Rolling File Appender -->
            <!-- https://stackify.com/log4j2-java/ -->
            <RollingFile name="RollingFileAppender" fileName="logs/app.log"
                         filePattern="logs/${date:yyyy-MM}/app-%d{MM-dd-yyyy}-%i.log">
                <PatternLayout>
                    <Pattern>%d [%t] %p %c  %highlight{%level}{FATAL=bg_red, ERROR=red, WARN=yellow, INFO=green, DEBUG=blue} - %msg%n </Pattern>
                </PatternLayout>
                <Policies>
                    <!-- a new log file is created every time the JVM starts -->
                    <OnStartupTriggeringPolicy />
                    <!-- the log file is rolled based on a date/time pattern -->
                    <TimeBasedTriggeringPolicy />
                    <!-- the file is rolled when it reaches a certain size -->
                    <SizeBasedTriggeringPolicy size="50 MB" />
                </Policies>
                <DefaultRolloverStrategy max="20" />
            </RollingFile>
    </Appenders>



    <Loggers>
        <Root level="INFO">
            <AppenderRef ref="Console"/>
            <AppenderRef ref="RollingFileAppender"/>
        </Root>
    </Loggers>
</Configuration>